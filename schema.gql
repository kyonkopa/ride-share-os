"""
Authentication tokens
"""
type AuthToken {
  accessToken: String!
  expiresIn: Int!
  refreshToken: String!
  tokenType: String!
}

"""
The possible cities for shift assignments
"""
enum CityEnum {
  """
  Accra
  """
  accra

  """
  Kumasi
  """
  kumasi

  """
  Takoradi
  """
  takoradi
}

"""
Input type for clocking in to a shift
"""
input ClockInInput {
  """
  GPS latitude
  """
  gpsLat: Float

  """
  GPS longitude
  """
  gpsLon: Float

  """
  Additional notes for the clock in event
  """
  notes: String

  """
  Current odometer reading
  """
  odometer: Int

  """
  ID of the shift assignment to clock into (optional - will auto-find active shift if not provided)
  """
  shiftAssignmentId: Int

  """
  Current vehicle range
  """
  vehicleRange: Int
}

"""
Autogenerated return type of ClockIn.
"""
type ClockInPayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  shiftEvent: ShiftEvent
}

"""
Input type for clocking out of a shift
"""
input ClockOutInput {
  """
  Bolt earnings for the shift
  """
  boltEarnings: Float

  """
  GPS latitude
  """
  gpsLat: Float

  """
  GPS longitude
  """
  gpsLon: Float

  """
  Additional notes for the clock out event
  """
  notes: String

  """
  Current odometer reading
  """
  odometer: Int

  """
  Uber earnings for the shift
  """
  uberEarnings: Float

  """
  Current vehicle range
  """
  vehicleRange: Int
}

"""
Autogenerated return type of ClockOut.
"""
type ClockOutPayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  shiftEvent: ShiftEvent
}

"""
Input type for creating an expense
"""
input CreateExpenseInput {
  """
  Expense amount
  """
  amount: Float!

  """
  Expense category
  """
  category: String!

  """
  Expense date
  """
  date: ISO8601Date!

  """
  Description of the expense (required when category is 'other')
  """
  description: String

  """
  Receipt key for uploaded receipt (optional)
  """
  receiptKey: String

  """
  ID of the vehicle (optional)
  """
  vehicleId: ID
}

"""
Autogenerated return type of CreateExpense.
"""
type CreateExpensePayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  expense: Expense
}

"""
Input type for creating a revenue record
"""
input CreateRevenueRecordInput {
  """
  Date of the revenue record
  """
  date: ISO8601Date!

  """
  ID of the driver
  """
  driverId: ID!

  """
  Whether the revenue is reconciled (default: false)
  """
  reconciled: Boolean

  """
  Revenue source (bolt, uber, or off_trip)
  """
  source: RevenueSourceEnum!

  """
  Total revenue amount
  """
  totalRevenue: Float!

  """
  ID of the vehicle (optional, used to find matching shift assignment)
  """
  vehicleId: ID
}

"""
Autogenerated return type of CreateRevenueRecord.
"""
type CreateRevenueRecordPayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  revenueRecord: RevenueRecord
}

"""
Input type for creating a new session
"""
input CreateSessionInput {
  """
  User's email address
  """
  email: String!

  """
  Login scope - either 'user' or 'staff'
  """
  loginScope: LoginScopeEnum!

  """
  User's password
  """
  password: String!
}

"""
Autogenerated return type of CreateSession.
"""
type CreateSessionPayload {
  authToken: AuthToken

  """
  An array of error messages
  """
  errors: [Error!]!
  user: User
}

"""
Daily payroll breakdown for a driver
"""
type DailyPayrollBreakdown {
  amountDue: Float!
  date: ISO8601Date!
  revenue: Float!
}

"""
A driver in the system
"""
type Driver {
  createdAt: ISO8601DateTime!
  dob: ISO8601Date!
  email: String!
  fullName: String!
  globalId: String!
  id: String!
  phoneNumber: String!
  revenueRecords: [RevenueRecord!]
  shiftAssignments: [ShiftAssignment!]
  updatedAt: ISO8601DateTime!
  user: User
  verified: Boolean!
}

"""
Payroll information for a driver
"""
type DriverPayroll {
  amountDue: Float!
  dailyBreakdown: [DailyPayrollBreakdown!]!
  driver: Driver!
  startDate: ISO8601Date!
}

"""
Represents an error in the system
"""
type Error {
  code: String
  field: String
  message: String!
}

"""
An expense record
"""
type Expense {
  """
  Expense amount in dollars
  """
  amount: Float!
  category: String!
  createdAt: ISO8601DateTime!
  date: ISO8601Date!

  """
  Description of the expense (used when category is 'other')
  """
  description: String
  globalId: String!
  id: String!
  receiptKey: String
  updatedAt: ISO8601DateTime!
  user: User
  vehicle: Vehicle
}

"""
Statistics for expenses
"""
type ExpenseStats {
  """
  Total expenses grouped by category
  """
  categoryTotals: JSON!

  """
  Total count of expenses
  """
  count: Int!

  """
  Total amount of expenses
  """
  totalAmount: Float!
}

"""
An ISO 8601-encoded date
"""
scalar ISO8601Date @specifiedBy(url: "https://tools.ietf.org/html/rfc3339")

"""
An ISO 8601-encoded datetime
"""
scalar ISO8601DateTime @specifiedBy(url: "https://tools.ietf.org/html/rfc3339")

"""
Represents untyped JSON
"""
scalar JSON

"""
The possible login scopes for authentication
"""
enum LoginScopeEnum {
  """
  Staff login scope
  """
  staff

  """
  Regular user login scope
  """
  user
}

type Mutation {
  """
  Clock in to a shift assignment
  """
  clockIn(
    """
    Input for clocking in
    """
    input: ClockInInput!

    """
    ID of the vehicle to clock in to
    """
    vehicleId: ID!
  ): ClockInPayload

  """
  Clock out of a shift assignment
  """
  clockOut(
    """
    Input for clocking out
    """
    input: ClockOutInput!
  ): ClockOutPayload

  """
  Create a new expense record
  """
  createExpense(
    """
    Input for creating an expense
    """
    input: CreateExpenseInput!
  ): CreateExpensePayload

  """
  Create a new revenue record
  """
  createRevenueRecord(
    """
    Input for creating a revenue record
    """
    input: CreateRevenueRecordInput!
  ): CreateRevenueRecordPayload

  """
  Login a user/create a session
  """
  createSession(
    """
    Input for creating a new session
    """
    input: CreateSessionInput!
  ): CreateSessionPayload

  """
  Pause an active shift assignment
  """
  pauseShift: PauseShiftPayload

  """
  Resume a paused shift assignment
  """
  resumeShift: ResumeShiftPayload

  """
  Update vehicle details
  """
  updateVehicle(
    """
    Input for updating a vehicle
    """
    input: UpdateVehicleInput!

    """
    ID of the vehicle to update
    """
    vehicleId: ID!
  ): UpdateVehiclePayload
}

"""
Represents a paginated list of results
"""
type PaginatedResultExpense {
  errors: [Error!]!
  items: [Expense!]!
  pagination: Pagination!
}

"""
Represents pagination metadata for a result set
"""
type Pagination {
  """
  Current page
  """
  currentPage: Int!

  """
  Is this the first page?
  """
  firstPage: Boolean!

  """
  Is this the last page?
  """
  lastPage: Boolean!

  """
  Next page
  """
  nextPage: Int

  """
  Number of pages available
  """
  pageCount: Int

  """
  Number of items per page
  """
  pageSize: Int!

  """
  Previous page
  """
  prevPage: Int

  """
  Total size of items that match this query
  """
  totalSize: Int!
}

"""
Input type for pagination parameters
"""
input PaginationInput {
  """
  The page number to fetch (starts at 1)
  """
  page: Int = 1

  """
  Number of items per page
  """
  perPage: Int = 20
}

"""
Autogenerated return type of PauseShift.
"""
type PauseShiftPayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  shiftEvent: ShiftEvent
}

"""
Payroll information for all drivers
"""
type Payroll {
  driverPayrolls: [DriverPayroll!]!
  totalAmountDue: Float!
}

"""
A permission in the system
"""
type Permission {
  createdAt: ISO8601DateTime!
  globalId: String!
  id: String!
  name: String!
  slug: String!
  updatedAt: ISO8601DateTime!
}

"""
The possible permissions in the system
"""
enum PermissionEnum {
  """
  View Drivers
  """
  DRIVER_READ_ACCESS

  """
  Manage Drivers
  """
  DRIVER_WRITE_ACCESS

  """
  View Expenses
  """
  EXPENSE_READ_ACCESS

  """
  Manage Expenses
  """
  EXPENSE_WRITE_ACCESS

  """
  View Revenue
  """
  REVENUE_READ_ACCESS

  """
  Manage Revenue
  """
  REVENUE_WRITE_ACCESS

  """
  View Shifts
  """
  SHIFT_READ_ACCESS

  """
  Manage Shifts
  """
  SHIFT_WRITE_ACCESS

  """
  View Users
  """
  USER_READ_ACCESS

  """
  Manage Users
  """
  USER_WRITE_ACCESS

  """
  View Vehicles
  """
  VEHICLE_READ_ACCESS

  """
  Manage Vehicles
  """
  VEHICLE_WRITE_ACCESS
}

type Query {
  """
  Get the current shift
  """
  currentShift: ShiftAssignment

  """
  Get the current authenticated user
  """
  currentUser: User

  """
  Get all drivers in the system
  """
  drivers: [Driver!]!

  """
  Get expense statistics within a date range
  """
  expenseStats(
    """
    End date for the date range
    """
    endDate: ISO8601Date

    """
    Start date for the date range
    """
    startDate: ISO8601Date
  ): ExpenseStats!

  """
  Get all expenses within a date range
  """
  expenses(
    """
    End date for the date range
    """
    endDate: ISO8601Date

    """
    Pagination options
    """
    pagination: PaginationInput!

    """
    Start date for the date range
    """
    startDate: ISO8601Date
  ): PaginatedResultExpense

  """
  Get shift assignments for the current driver within a date range
  """
  myShiftAssignments(
    """
    End date for the date range
    """
    endDate: ISO8601Date!

    """
    Start date for the date range
    """
    startDate: ISO8601Date!
  ): [ShiftAssignment!]!

  """
  Get all drivers with their shift assignments for payroll calculation
  """
  payroll(
    """
    End date for the date range
    """
    endDate: ISO8601Date!

    """
    Start date for the date range
    """
    startDate: ISO8601Date!
  ): Payroll!

  """
  Get all available permissions in the system
  """
  permissions: [PermissionEnum!]!

  """
  Get all revenue records within a date range
  """
  revenueRecords(
    """
    End date for the date range
    """
    endDate: ISO8601Date

    """
    Start date for the date range
    """
    startDate: ISO8601Date
  ): [RevenueRecord!]!

  """
  Get revenue statistics within a date range
  """
  revenueStats(
    """
    End date for the date range
    """
    endDate: ISO8601Date

    """
    Start date for the date range
    """
    startDate: ISO8601Date
  ): RevenueStats!

  """
  Get today's shifts
  """
  todayShifts: [ShiftAssignment!]!

  """
  Get today's shift events for the current driver
  """
  todaysShiftEvents: [ShiftEvent!]!

  """
  Get all vehicles in the system
  """
  vehicles: [Vehicle!]!
}

"""
Autogenerated return type of ResumeShift.
"""
type ResumeShiftPayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  shiftEvent: ShiftEvent
}

"""
A revenue record for a shift
"""
type RevenueRecord {
  createdAt: ISO8601DateTime!
  driver: Driver!
  globalId: String!
  id: String!
  reconciled: Boolean!
  shiftAssignment: ShiftAssignment!
  source: RevenueSourceEnum!
  totalProfit: Float!
  totalRevenue: Float!
  updatedAt: ISO8601DateTime!
}

enum RevenueSourceEnum {
  """
  Bolt
  """
  bolt

  """
  Off trip
  """
  off_trip

  """
  Uber
  """
  uber
}

"""
Statistics for revenue records
"""
type RevenueStats {
  """
  Total count of revenue records
  """
  count: Int!

  """
  Total revenue and profit grouped by source
  """
  sourceTotals: JSON!

  """
  Total profit from all revenue records
  """
  totalProfit: Float!

  """
  Total revenue from all revenue records
  """
  totalRevenue: Float!
}

"""
A shift assignment for a driver
"""
type ShiftAssignment {
  actualEndTime: ISO8601DateTime
  actualStartTime: ISO8601DateTime
  city: CityEnum!
  createdAt: ISO8601DateTime!
  driver: Driver!
  endTime: ISO8601DateTime!
  globalId: String!
  id: String!
  revenueRecords: [RevenueRecord!]
  shiftEvents: [ShiftEvent!]
  startTime: ISO8601DateTime!
  status: ShiftStatusEnum!
  updatedAt: ISO8601DateTime!
  vehicle: Vehicle
}

"""
An event that occurs during a shift
"""
type ShiftEvent {
  createdAt: ISO8601DateTime!
  eventType: ShiftEventTypeEnum!
  globalId: String!
  gpsLat: Float
  gpsLon: Float
  id: String!
  notes: String
  odometer: Int
  shiftAssignment: ShiftAssignment!
  updatedAt: ISO8601DateTime!
  vehicleRange: Int
}

"""
The possible types of shift events
"""
enum ShiftEventTypeEnum {
  """
  A clock in event
  """
  clock_in

  """
  A clock out event
  """
  clock_out

  """
  A pause event
  """
  pause

  """
  A resume event
  """
  resume

  """
  A telemetry snapshot event
  """
  telemetry_snapshot
}

"""
The possible statuses for a shift assignment
"""
enum ShiftStatusEnum {
  """
  Shift is currently active
  """
  active

  """
  Shift has been completed
  """
  completed

  """
  Shift was missed
  """
  missed

  """
  Shift is paused
  """
  paused

  """
  Shift is scheduled but not yet started
  """
  scheduled
}

"""
Input type for updating a vehicle
"""
input UpdateVehicleInput {
  """
  Latest odometer reading
  """
  latestOdometer: Int

  """
  Latest vehicle range
  """
  latestRange: Int

  """
  Vehicle license plate
  """
  licensePlate: String

  """
  Vehicle make
  """
  make: String

  """
  Vehicle model
  """
  model: String

  """
  Telematics source
  """
  telematicsSource: Int

  """
  Year of manufacture
  """
  yearOfManufacture: Int
}

"""
Autogenerated return type of UpdateVehicle.
"""
type UpdateVehiclePayload {
  """
  An array of error messages
  """
  errors: [Error!]!
  vehicle: Vehicle
}

"""
A user in the system
"""
type User {
  createdAt: ISO8601DateTime!
  driver: Driver
  email: String!
  expenses: [Expense!]
  firstName: String!
  fullName: String!
  globalId: String!
  id: String!
  lastName: String!
  lastSignInAt: ISO8601DateTime
  permissions: [Permission!]
  signInCount: Int!
  updatedAt: ISO8601DateTime!
}

"""
A vehicle in the system
"""
type Vehicle {
  createdAt: ISO8601DateTime!
  displayName: String!
  expenses: [Expense!]
  globalId: String!
  id: String!
  inUse: Boolean!
  latestOdometer: Int!
  latestRange: Int!
  licensePlate: String!
  make: String!
  model: String!
  shiftAssignments: [ShiftAssignment!]
  telematicsSource: Int!
  updatedAt: ISO8601DateTime!
  vehicleImageUrl: String
  yearOfManufacture: Int!
}
